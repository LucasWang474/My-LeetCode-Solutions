function isValidSudoku(board: string[][]): boolean {
  const set = new Set<string>();
  for (let i = 0; i < 9; i++) {
    for (let j = 0; j < 9; j++) {
      const rowStr = `row${i}${board[i][j]}`;
      if (board[i][j] !== '.') {
        if (set.has(rowStr)) return false;
        set.add(rowStr);
      }
      
      const colStr = `col${j}${board[j][i]}`;
      if (board[j][i] !== '.') {
        if (set.has(colStr)) return false;
        set.add(colStr);
      }
      
      const subI = Math.floor(i / 3) * 3 + Math.floor(j / 3);
      const subJ = j % 3 + (i % 3) * 3;
      const subStr = `sub${i}${board[subI][subJ]}`;
      if (board[subI][subJ] !== '.') {
        if (set.has(subStr)) return false;
        set.add(subStr);
      }
    }
  }
  return true;
}


// Test case 1
const board1 = [
  ['5', '3', '.', '.', '7', '.', '.', '.', '.'],
  ['6', '.', '.', '1', '9', '5', '.', '.', '.'],
  ['.', '9', '8', '.', '.', '.', '.', '6', '.'],
  ['8', '.', '.', '.', '6', '.', '.', '.', '3'],
  ['4', '.', '.', '8', '.', '3', '.', '.', '1'],
  ['7', '.', '.', '.', '2', '.', '.', '.', '6'],
  ['.', '6', '.', '.', '.', '.', '2', '8', '.'],
  ['.', '.', '.', '4', '1', '9', '.', '.', '5'],
  ['.', '.', '.', '.', '8', '.', '.', '7', '9']
];
console.log(isValidSudoku(board1) === true);

// Test case 2
const board2 = [
  ['8', '3', '.', '.', '7', '.', '.', '.', '.'],
  ['6', '.', '.', '1', '9', '5', '.', '.', '.'],
  ['.', '9', '8', '.', '.', '.', '.', '6', '.'],
  ['8', '.', '.', '.', '6', '.', '.', '.', '3'],
  ['4', '.', '.', '8', '.', '3', '.', '.', '1'],
  ['7', '.', '.', '.', '2', '.', '.', '.', '6'],
  ['.', '6', '.', '.', '.', '.', '2', '8', '.'],
  ['.', '.', '.', '4', '1', '9', '.', '.', '5'],
  ['.', '.', '.', '.', '8', '.', '.', '7', '9']
];
console.log(isValidSudoku(board2) === false);


// Test case 3
const board3 = [
  ['.', '.', '.', '.', '5', '.', '.', '1', '.'],
  ['.', '4', '.', '3', '.', '.', '.', '.', '.'],
  ['.', '.', '.', '.', '.', '3', '.', '.', '1'],
  ['8', '.', '.', '.', '.', '.', '.', '2', '.'],
  ['.', '.', '2', '.', '7', '.', '.', '.', '.'],
  ['.', '1', '5', '.', '.', '.', '.', '.', '.'],
  ['.', '.', '.', '.', '.', '2', '.', '.', '.'],
  ['.', '2', '.', '9', '.', '.', '.', '.', '.'],
  ['.', '.', '4', '.', '.', '.', '.', '.', '.']
];
console.log(isValidSudoku(board3) === false);
